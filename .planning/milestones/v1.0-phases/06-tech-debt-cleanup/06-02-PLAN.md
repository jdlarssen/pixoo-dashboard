---
phase: 06-tech-debt-cleanup
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - .planning/phases/01-foundation/01-01-SUMMARY.md
  - .planning/phases/01-foundation/01-02-SUMMARY.md
  - .planning/phases/02-bus-departures/02-01-SUMMARY.md
  - .planning/phases/02-bus-departures/02-02-SUMMARY.md
  - .planning/phases/03-weather/03-01-SUMMARY.md
  - .planning/phases/03-weather/03-02-SUMMARY.md
  - .planning/phases/03-weather/03-03-SUMMARY.md
  - .planning/phases/04-polish-and-reliability/04-01-SUMMARY.md
  - .planning/phases/04-polish-and-reliability/04-02-SUMMARY.md
  - .planning/phases/04-polish-and-reliability/04-03-SUMMARY.md
  - .planning/phases/04-polish-and-reliability/04-04-SUMMARY.md
  - .planning/phases/04-polish-and-reliability/04-05-SUMMARY.md
  - .planning/phases/05-verification-and-cleanup/05-01-SUMMARY.md
autonomous: true
requirements: []

must_haves:
  truths:
    - "Every plan SUMMARY.md has a requirements_completed field in its YAML frontmatter"
    - "Requirement IDs in each SUMMARY match the traceability table in REQUIREMENTS.md"
    - "Plans with no associated requirements have an empty list (requirements_completed: [])"
    - "The research SUMMARY (.planning/research/SUMMARY.md) is NOT modified"
  artifacts:
    - path: ".planning/phases/01-foundation/01-01-SUMMARY.md"
      provides: "SUMMARY with requirements_completed: [DISP-01, DISP-02, RLBL-01]"
      contains: "requirements_completed:"
    - path: ".planning/phases/01-foundation/01-02-SUMMARY.md"
      provides: "SUMMARY with requirements_completed: [DISP-03, CLCK-01, CLCK-02]"
      contains: "requirements_completed:"
    - path: ".planning/phases/02-bus-departures/02-01-SUMMARY.md"
      provides: "SUMMARY with requirements_completed: [BUS-01, BUS-02, BUS-03, BUS-05]"
      contains: "requirements_completed:"
    - path: ".planning/phases/02-bus-departures/02-02-SUMMARY.md"
      provides: "SUMMARY with requirements_completed: [BUS-01, BUS-02, BUS-03, BUS-05]"
      contains: "requirements_completed:"
    - path: ".planning/phases/03-weather/03-01-SUMMARY.md"
      provides: "SUMMARY with requirements_completed: [WTHR-01, WTHR-03]"
      contains: "requirements_completed:"
    - path: ".planning/phases/03-weather/03-02-SUMMARY.md"
      provides: "SUMMARY with requirements_completed: [WTHR-01, WTHR-02, WTHR-03, WTHR-04]"
      contains: "requirements_completed:"
    - path: ".planning/phases/03-weather/03-03-SUMMARY.md"
      provides: "SUMMARY with requirements_completed: []"
      contains: "requirements_completed:"
    - path: ".planning/phases/04-polish-and-reliability/04-01-SUMMARY.md"
      provides: "SUMMARY with requirements_completed: [BUS-04, RLBL-02]"
      contains: "requirements_completed:"
    - path: ".planning/phases/04-polish-and-reliability/04-02-SUMMARY.md"
      provides: "SUMMARY with requirements_completed: [DISP-04]"
      contains: "requirements_completed:"
    - path: ".planning/phases/04-polish-and-reliability/04-03-SUMMARY.md"
      provides: "SUMMARY with requirements_completed: [MSG-01]"
      contains: "requirements_completed:"
    - path: ".planning/phases/04-polish-and-reliability/04-04-SUMMARY.md"
      provides: "SUMMARY with requirements_completed: [RLBL-03]"
      contains: "requirements_completed:"
    - path: ".planning/phases/04-polish-and-reliability/04-05-SUMMARY.md"
      provides: "SUMMARY with requirements_completed: []"
      contains: "requirements_completed:"
    - path: ".planning/phases/05-verification-and-cleanup/05-01-SUMMARY.md"
      provides: "SUMMARY with requirements_completed: []"
      contains: "requirements_completed:"
  key_links:
    - from: "SUMMARY frontmatter requirements_completed"
      to: "REQUIREMENTS.md traceability table"
      via: "Requirement ID matching"
      pattern: "requirements_completed:.*[A-Z]+-\\d+"
---

<objective>
Add requirements_completed frontmatter field to all 13 plan SUMMARY.md files.

Purpose: Close the structural format gap identified in the v1.0 milestone audit -- no SUMMARY file currently tracks which requirement IDs were completed by that plan. This enables automated traceability from plans back to requirements.

Output: All 13 SUMMARY.md files updated with accurate requirements_completed fields.
</objective>

<execution_context>
@/Users/jdl/.claude/get-shit-done/workflows/execute-plan.md
@/Users/jdl/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/REQUIREMENTS.md
@.planning/phases/06-tech-debt-cleanup/06-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add requirements_completed to Phase 1-3 SUMMARY files</name>
  <files>
    .planning/phases/01-foundation/01-01-SUMMARY.md
    .planning/phases/01-foundation/01-02-SUMMARY.md
    .planning/phases/02-bus-departures/02-01-SUMMARY.md
    .planning/phases/02-bus-departures/02-02-SUMMARY.md
    .planning/phases/03-weather/03-01-SUMMARY.md
    .planning/phases/03-weather/03-02-SUMMARY.md
    .planning/phases/03-weather/03-03-SUMMARY.md
  </files>
  <action>
Add a `requirements_completed:` field to each SUMMARY.md's YAML frontmatter. Insert it after the `tags:` line (before the `# Dependency graph` comment). Use YAML list syntax matching the existing frontmatter style.

Exact mappings (from RESEARCH.md, cross-referenced with REQUIREMENTS.md traceability table):

- **01-01-SUMMARY.md**: `requirements_completed: [DISP-01, DISP-02, RLBL-01]`
  (scaffolding, fonts, device driver with connection refresh)
- **01-02-SUMMARY.md**: `requirements_completed: [DISP-03, CLCK-01, CLCK-02]`
  (layout, clock, Norwegian date)
- **02-01-SUMMARY.md**: `requirements_completed: [BUS-01, BUS-02, BUS-03, BUS-05]`
  (bus provider, countdown format, refresh cycle)
- **02-02-SUMMARY.md**: `requirements_completed: [BUS-01, BUS-02, BUS-03, BUS-05]`
  (bus renderer integration -- both plans contributed to these requirements)
- **03-01-SUMMARY.md**: `requirements_completed: [WTHR-01, WTHR-03]`
  (weather provider, temperature, high/low)
- **03-02-SUMMARY.md**: `requirements_completed: [WTHR-01, WTHR-02, WTHR-03, WTHR-04]`
  (weather renderer, icon, rain indicator)
- **03-03-SUMMARY.md**: `requirements_completed: []`
  (gap closure -- animation visibility fix, no new requirements)

Do NOT modify `.planning/research/SUMMARY.md` -- it is not a plan SUMMARY.
  </action>
  <verify>
```bash
# Check all 7 files have the field
for f in .planning/phases/01-foundation/01-{01,02}-SUMMARY.md \
         .planning/phases/02-bus-departures/02-{01,02}-SUMMARY.md \
         .planning/phases/03-weather/03-{01,02,03}-SUMMARY.md; do
  grep -c "requirements_completed:" "$f"
done
# Each should output 1

# Verify research SUMMARY was not touched
grep -c "requirements_completed" .planning/research/SUMMARY.md 2>/dev/null
# Should return 0 or file not found
```
  </verify>
  <done>All 7 Phase 1-3 SUMMARY files have requirements_completed fields with correct requirement IDs. Research SUMMARY untouched.</done>
</task>

<task type="auto">
  <name>Task 2: Add requirements_completed to Phase 4-5 SUMMARY files</name>
  <files>
    .planning/phases/04-polish-and-reliability/04-01-SUMMARY.md
    .planning/phases/04-polish-and-reliability/04-02-SUMMARY.md
    .planning/phases/04-polish-and-reliability/04-03-SUMMARY.md
    .planning/phases/04-polish-and-reliability/04-04-SUMMARY.md
    .planning/phases/04-polish-and-reliability/04-05-SUMMARY.md
    .planning/phases/05-verification-and-cleanup/05-01-SUMMARY.md
  </files>
  <action>
Add a `requirements_completed:` field to each SUMMARY.md's YAML frontmatter. Insert after the `tags:` line, same position as Task 1.

Exact mappings:

- **04-01-SUMMARY.md**: `requirements_completed: [BUS-04, RLBL-02]`
  (urgency colors, staleness/error handling)
- **04-02-SUMMARY.md**: `requirements_completed: [DISP-04]`
  (auto-brightness scheduling)
- **04-03-SUMMARY.md**: `requirements_completed: [MSG-01]`
  (Discord message override)
- **04-04-SUMMARY.md**: `requirements_completed: [RLBL-03]`
  (launchd service wrapper)
- **04-05-SUMMARY.md**: `requirements_completed: []`
  (ad-hoc UAT refinement -- 3D animations, no new requirements)
- **05-01-SUMMARY.md**: `requirements_completed: []`
  (verification and cleanup -- gap closure, no new requirements)
  </action>
  <verify>
```bash
# Check all 6 files have the field
for f in .planning/phases/04-polish-and-reliability/04-{01,02,03,04,05}-SUMMARY.md \
         .planning/phases/05-verification-and-cleanup/05-01-SUMMARY.md; do
  grep -c "requirements_completed:" "$f"
done
# Each should output 1

# Verify total count across all SUMMARYs: should be exactly 13
grep -rl "requirements_completed:" .planning/phases/ | wc -l
# Should output 13
```
  </verify>
  <done>All 6 Phase 4-5 SUMMARY files have requirements_completed fields. Total: 13 out of 13 SUMMARY files updated. All 19 v1 requirement IDs are covered across the SUMMARY files.</done>
</task>

</tasks>

<verification>
1. `grep -rl "requirements_completed:" .planning/phases/` returns exactly 13 files
2. Every requirement ID from REQUIREMENTS.md (DISP-01 through MSG-01) appears in at least one SUMMARY
3. Plans with no requirements (03-03, 04-05, 05-01) have `requirements_completed: []`
4. `.planning/research/SUMMARY.md` was NOT modified
5. All YAML frontmatter remains valid (no broken `---` delimiters)
</verification>

<success_criteria>
- All 13 plan SUMMARY.md files have a requirements_completed field
- Requirement IDs match the traceability table in REQUIREMENTS.md
- No false requirement assignments (each ID mapped to the plan that actually delivered it)
- Research SUMMARY excluded from changes
- YAML frontmatter structure intact in all files
</success_criteria>

<output>
After completion, create `.planning/phases/06-tech-debt-cleanup/06-02-SUMMARY.md`
</output>
